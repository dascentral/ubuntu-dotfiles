#!/bin/sh

#===================================================================================
# Amazon S3 Backup Script - Ubuntu 14.04
#===================================================================================
#
# DESCRIPTION
# Script that facilitates backup of server data to Amazon S3.
#
# PARAMETERS
# - path - The path of the folder to by synced
# - bucket - The Amazon S3 bucket that should receive the content
#
# ACTIONS PERFORMED
# - Performs a sync with Amazon S3
# 
# ASSUMPTIONS
# - s3cmd utilities have been installed and properly configured
#
#===================================================================================

# Two parameter is required
if [ $# != 2 ]; then
   echo "Usage: s3-backup [path] [bucket]";
   exit 1
fi

clear

# Perform the sync
printf "\n\033[1mPerforming Sync of $1 to $2\033[0m\n"
date +'%a %b %e %H:%M:%S %Z %Y'
s3cmd sync --recursive --preserve $1 s3://$2
date +'%a %b %e %H:%M:%S %Z %Y'
printf "\n\033[32mComplete!\033[0m\n"